{"mappings":"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","sources":["src/js/render.js","src/js/storage.js","src/js/my_library.js"],"sourcesContent":["function renderMoviesList(list) {\n  const markup = list\n    .map(({ id, poster_path, title, genres, release_year, vote_average }) => {\n      // adaug elemente in markup\n      return `<div>\n    <img id=\"${id}\" src=\"${poster_path}\" alt=\"movie poster\" loading=\"lazy\" />\n            <p class=\"movie-title\">   ${title} </p>\n            <p class=\"movie-short-descr\"> ${genres} | ${release_year} | <span>${vote_average}</span></p>\n        </div>`;\n    })\n    .join('');\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = markup;\n}\n\nfunction renderPaginationButtons(crtPage, totalPages) {\n  const btnsDivElem = document.querySelector('.buttons-div');\n  if (btnsDivElem !== null) btnsDivElem.remove();\n\n  // pag.crt\n  // 1 -> se vad        1,2,3,...,total,rgtarw\n  // 2 -> se vad lftarw,1,2,3,4,...,total,rgtarw\n  // 3 -> se vad lftarw,1,2,3,4,5,...,total,rgtarw\n  // 4 -> se vad lftarw,1,2,3,4,5,6,...,total,rgtarw\n  // 5 -> se vad lftarw,1,...,3,4,5,6,7,...,total,rgtarw\n  // creez un div cu un nr de butoane\n  // cele din extreme sunt cu sageata si sunt vizibile numai in anumite conditii\n  // pe pozitia a treia dinspre margini spre centru vor fi butoane cu \"...\" si ele vizibile numai in anumite conditii\n  // al doilea buton de la st spre dr, va fi \"1\"\n  // al doilea buton de la dr spre st va fi totalPages\n  if (totalPages === 1) return;\n  let leftMarkup = `<div class=\"buttons-div\">\n      <button id=\"lftarwBtn\">&larr;</button>\n      <button id=\"oneBtn\">1</button>\n      <button id=\"lftdotBtn\">...</button>`;\n  let rigthMarkup = `\n      <button id=\"rgtdotBtn\">...</button>\n      <button>${totalPages}</button>\n      <button id=\"rgtarwBtn\">&rarr;</button>\n    </div>`;\n  let minPage, maxPage, crtBtn;\n\n  // midMarkup\n  switch (crtPage) {\n    case 1:\n      minPage = 1;\n      maxPage = 3;\n      break;\n    case 2:\n      minPage = 1;\n      maxPage = 4;\n      break;\n    default:\n      minPage = crtPage - 2;\n      maxPage = crtPage + 2;\n  }\n  if (maxPage >= totalPages) maxPage = totalPages - 1;\n  let midMarkup = '';\n  for (let i = minPage; i <= maxPage; i++) {\n    if (i === 1) continue;\n    midMarkup += `<button>${i}</button>`;\n  }\n  let markup = leftMarkup + midMarkup + rigthMarkup;\n\n  //insert the markup beforeend of main\n  const mainElem = document.querySelector('main');\n  mainElem.insertAdjacentHTML('beforeend', markup);\n\n  //select the needed button elements\n  const lftarwBtn = document.querySelector('#lftarwBtn');\n  const lftdotBtn = document.querySelector('#lftdotBtn');\n  const rgtdotBtn = document.querySelector('#rgtdotBtn');\n  const rgtarwBtn = document.querySelector('#rgtarwBtn');\n\n  //hide the proper buttons\n  if (crtPage >= 1 && crtPage <= 4) {\n    lftdotBtn.style.display = 'none';\n    crtBtn = crtPage + 2;\n  }\n  if (crtPage === 1) {\n    lftarwBtn.style.display = 'none';\n    crtBtn = 2;\n  }\n  if (crtPage > 4) crtBtn = 6;\n  if (totalPages - maxPage < 2) rgtdotBtn.style.display = 'none';\n  if (crtPage === totalPages) {\n    rgtarwBtn.style.display = 'none';\n    crtBtn = 7;\n  }\n\n  //adding style to current page button\n  const currentBtn = document.querySelector(\n    `.buttons-div :nth-child(${crtBtn})`\n  );\n  currentBtn.classList.add('active');\n\n  lftarwBtn.style.backgroundColor = '#F7F7F7';\n  rgtarwBtn.style.backgroundColor = '#F7F7F7';\n\n  // const pagContainer = document.querySelector('.buttons-div');\n  // console.log(pagContainer);\n  // console.log(currentBtn);\n  // console.log(crtBtn);\n}\n\nexport { renderMoviesList, renderPaginationButtons };\n","const WATCHED_KEY = 'filmoteka-watched',\n  QUEUE_KEY = 'filmoteka-queue';\n\nlet value = '';\n\nfunction saveMovieList(key, list) {\n  value = '';\n  list.map(item => {\n    value += JSON.stringify(item) + '*';\n  });\n  value = value.slice(0, value.length - 1);\n  localStorage.setItem(key, value);\n}\n\nfunction loadMovieList(key) {\n  var textList,\n    movieList = [];\n  try {\n    value = localStorage.getItem(key);\n  } catch (error) {\n    console.error(error);\n  }\n  if (!value) {\n    value = '';\n  } else {\n    //processing the loaded data\n    textList = value.split('*');\n    textList.forEach(item => {\n      movieList.push(JSON.parse(item));\n    });\n  }\n  return movieList;\n}\n\nexport { WATCHED_KEY, QUEUE_KEY, saveMovieList, loadMovieList };\n","import { renderMoviesList, renderPaginationButtons } from './render.js';\nimport {\n  WATCHED_KEY,\n  QUEUE_KEY,\n  saveMovieList,\n  loadMovieList,\n} from './storage.js';\n\nvar watchedList = [],\n  queueList = [],\n  movArray = [],\n  watchedActive = true;\nvar m;\n\nfunction initializeLibrary() {\n  watchedList = loadMovieList(WATCHED_KEY);\n  queueList = loadMovieList(QUEUE_KEY);\n  setActiveStyles(watchedBtn);\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR WATCHED LIST';\n  if (watchedList.length > 0) {\n    renderMoviesList(watchedList);\n  } else {\n    const spanElem = document.querySelector('.error-message');\n    spanElem.innerText = 'Oops! Your \"watched\" library is empty!';\n  }\n  clearBtn.addEventListener('click', clearBtnClick);\n}\nfunction clearBtnClick() {\n  if (watchedActive) {\n    console.log('clear watched list');\n    watchedList = [];\n    saveMovieList(WATCHED_KEY, watchedList);\n  } else {\n    console.log('clear queue list');\n    queueList = [];\n    saveMovieList(QUEUE_KEY, queueList);\n  }\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = '';\n}\nfunction setActiveStyles(element) {\n  element.classList.add('active');\n}\n\nfunction removeActiveStyles(element) {\n  element.classList.remove('active');\n}\nfunction watchedBtnClick() {\n  setActiveStyles(watchedBtn);\n  removeActiveStyles(queueBtn);\n  watchedActive = true;\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR WATCHED LIST';\n  const spanElem = document.querySelector('.error-message');\n  if (watchedList.length === 0) {\n    spanElem.innerText = 'Oops! Your \"watched\" library is empty!';\n    const moviesDivElem = document.querySelector('.movies-div');\n    moviesDivElem.innerHTML = '';\n    return;\n  } else {\n    spanElem.innerText = '';\n  }\n  renderMoviesList(watchedList);\n}\nfunction queueBtnClick() {\n  setActiveStyles(queueBtn);\n  removeActiveStyles(watchedBtn);\n  watchedActive = false;\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR QUEUE LIST';\n  const spanElem = document.querySelector('.error-message');\n  if (queueList.length === 0) {\n    spanElem.innerText = 'Oops! Your \"queue\" library is empty!';\n    const moviesDivElem = document.querySelector('.movies-div');\n    moviesDivElem.innerHTML = '';\n    return;\n  } else {\n    spanElem.innerText = '';\n  }\n\n  renderMoviesList(queueList);\n}\ndocument.addEventListener('DOMContentLoaded', initializeLibrary);\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\n\nwatchedBtn.addEventListener('click', watchedBtnClick);\nqueueBtn.addEventListener('click', queueBtnClick);\n\n// modal section\nconst closeModalButton2 = document.getElementById('closeModalBtn2');\nconst backdrop2 = document.querySelector('.bckdrp');\ncloseModalButton2.addEventListener('click', function () {\n  backdrop2.style.display = 'none';\n});\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    backdrop2.style.display = 'none';\n  }\n});\nbackdrop2.addEventListener('click', function (event) {\n  if (event.target === backdrop2) {\n    backdrop2.style.display = 'none';\n  }\n});\n\nconst watchedBtn2 = document.querySelector('.wbtn2');\nconst queueBtn2 = document.querySelector('.qbtn2');\nwatchedBtn2.addEventListener('click', watchedBtnClick2);\nqueueBtn2.addEventListener('click', queueBtnClick2);\n\nfunction watchedBtnClick2() {\n  if (m.watched) {\n    m.watched = false;\n    watchedBtn2.innerHTML = 'Add to watched';\n    let extractPos = watchedList.findIndex(movie => movie.id === m.id);\n    watchedList.splice(extractPos, 1);\n  } else {\n    watchedBtn2.innerHTML = 'Remove from watched';\n    m.watched = true;\n    watchedList.push(m);\n  }\n  saveMovieList(WATCHED_KEY, watchedList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\nfunction queueBtnClick2() {\n  if (m.queued) {\n    m.queued = false;\n    queueBtn2.innerHTML = 'Add to queue';\n    let extractPos = queueList.findIndex(movie => movie.id === m.id);\n    queueList.splice(extractPos, 1);\n  } else {\n    queueBtn2.innerHTML = 'Remove from queue';\n    m.queued = true;\n    queueList.push(m);\n  }\n  saveMovieList(QUEUE_KEY, queueList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\n// end of modal section\nconst btnsDivElem2 = document.querySelector('.movdiv2');\nbtnsDivElem2.addEventListener('click', showModal2);\n\nfunction showModal2(event) {\n  if (event.target.nodeName !== 'IMG') return;\n  if (watchedActive) {\n    movArray = watchedList;\n  } else {\n    movArray = queueList;\n  }\n  const imgId = event.target.attributes[0].value;\n  var pos = movArray.findIndex(movie => imgId - movie.id === 0);\n  // fill modal content with movie data\n  const titleElem = document.querySelector('.title-film');\n  const imgElem = document.querySelector('.movie-poster');\n  const voteElem = document.querySelector('.vote');\n  const votesElem = document.querySelector('.votes');\n  const popularityElem = document.querySelector('.popularity');\n  const origTitleElem = document.querySelector('.title');\n  const genresElem = document.querySelector('.genres');\n  const overviewElem = document.querySelector('.description-text');\n\n  m = movArray[pos];\n  titleElem.innerHTML = m.title;\n  imgElem.src = m.poster_path;\n  voteElem.innerHTML = m.vote_average;\n  votesElem.innerHTML = ' / ' + m.vote_count;\n  popularityElem.innerHTML = m.popularity;\n  origTitleElem.innerHTML = m.original_title;\n  genresElem.innerHTML = m.genres;\n  overviewElem.innerHTML = m.overview;\n\n  if (m.watched) {\n    watchedBtn2.innerHTML = 'Remove from watched';\n  } else {\n    watchedBtn2.innerHTML = 'Add to watched';\n  }\n  if (m.queued) {\n    queueBtn2.innerHTML = 'Remove from queue';\n  } else {\n    queueBtn2.innerHTML = 'Add to queue';\n  }\n\n  // show modal window\n  backdrop2.style.display = 'block';\n}\n"],"names":["$fc4e315082f29d74$export$322a725b9435eb51","list","markup","map","param","id","poster_path","title","genres","release_year","vote_average","concat","join","document","querySelector","innerHTML","$e40a24b7fc93604f$export$edb7ffe7281d2bea","$e40a24b7fc93604f$export$929e46ac3e0018f6","$e40a24b7fc93604f$var$value","$e40a24b7fc93604f$export$d04fc1023ac0d0f4","key","item","JSON","stringify","slice","length","localStorage","setItem","$e40a24b7fc93604f$export$443605a02e185965","movieList","getItem","error","console","split","forEach","push","parse","$1701d53dd42720ad$var$m","$1701d53dd42720ad$var$watchedList","$1701d53dd42720ad$var$queueList","$1701d53dd42720ad$var$movArray","$1701d53dd42720ad$var$watchedActive","$1701d53dd42720ad$var$clearBtnClick","log","$1701d53dd42720ad$var$setActiveStyles","element","classList","add","$1701d53dd42720ad$var$removeActiveStyles","remove","addEventListener","$1701d53dd42720ad$var$watchedBtn","clearBtn","innerText","$1701d53dd42720ad$var$queueBtn","spanElem","$1701d53dd42720ad$var$closeModalButton2","getElementById","$1701d53dd42720ad$var$backdrop2","style","display","event","target","$1701d53dd42720ad$var$watchedBtn2","$1701d53dd42720ad$var$queueBtn2","watched","extractPos","findIndex","movie","splice","queued","nodeName","imgId","attributes","value","pos","titleElem","imgElem","voteElem","votesElem","popularityElem","origTitleElem","genresElem","overviewElem","src","vote_count","popularity","original_title","overview"],"version":3,"file":"my_library.9d33ca12.js.map"}