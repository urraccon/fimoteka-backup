!function(){function e(e){var t=e.map((function(e){var t=e.id,n=e.poster_path,r=e.title,o=e.genres,c=e.release_year,i=e.vote_average;return'<div>\n    <img id="'.concat(t,'" src="').concat(n,'" alt="movie poster" loading="lazy" />\n            <p class="movie-title">   ').concat(r,' </p>\n            <p class="movie-short-descr"> ').concat(o," | ").concat(c," | <span>").concat(i,"</span></p>\n        </div>")})).join("");document.querySelector(".movies-div").innerHTML=t}var t="filmoteka-watched",n="filmoteka-queue",r="";function o(e,t){r="",t.map((function(e){r+=JSON.stringify(e)+"*"})),r=r.slice(0,r.length-1),localStorage.setItem(e,r)}function c(e){var t=[];try{r=localStorage.getItem(e)}catch(e){console.error(e)}return r?r.split("*").forEach((function(e){t.push(JSON.parse(e))})):r="",t}var i,u=[],d=[],a=[],l=!0;function s(){l?(console.log("clear watched list"),o(t,u=[])):(console.log("clear queue list"),o(n,d=[])),document.querySelector(".movies-div").innerHTML=""}function m(e){e.classList.add("active")}function v(e){e.classList.remove("active")}document.addEventListener("DOMContentLoaded",(function(){u=c(t),d=c(n),m(y);var r=document.querySelector(".clear-btn");r.innerText="CLEAR WATCHED LIST",u.length>0?e(u):document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!',r.addEventListener("click",s)}));var y=document.querySelector(".watched-btn"),f=document.querySelector(".queue-btn");y.addEventListener("click",(function(){m(y),v(f),l=!0,document.querySelector(".clear-btn").innerText="CLEAR WATCHED LIST";var t=document.querySelector(".error-message");if(0===u.length)return t.innerText='Oops! Your "watched" library is empty!',void(document.querySelector(".movies-div").innerHTML="");t.innerText="",e(u)})),f.addEventListener("click",(function(){m(f),v(y),l=!1,document.querySelector(".clear-btn").innerText="CLEAR QUEUE LIST";var t=document.querySelector(".error-message");if(0===d.length)return t.innerText='Oops! Your "queue" library is empty!',void(document.querySelector(".movies-div").innerHTML="");t.innerText="",e(d)}));var p=document.getElementById("closeModalBtn2"),L=document.querySelector(".bckdrp");p.addEventListener("click",(function(){L.style.display="none"})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(L.style.display="none")})),L.addEventListener("click",(function(e){e.target===L&&(L.style.display="none")}));var q=document.querySelector(".wbtn2"),T=document.querySelector(".qbtn2");q.addEventListener("click",(function(){if(i.watched){i.watched=!1,q.innerHTML="Add to watched";var n=u.findIndex((function(e){return e.id===i.id}));u.splice(n,1)}else q.innerHTML="Remove from watched",i.watched=!0,u.push(i);o(t,u),e(l?u:d)})),T.addEventListener("click",(function(){if(i.queued){i.queued=!1,T.innerHTML="Add to queue";var t=d.findIndex((function(e){return e.id===i.id}));d.splice(t,1)}else T.innerHTML="Remove from queue",i.queued=!0,d.push(i);o(n,d),e(l?u:d)})),document.querySelector(".movdiv2").addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;a=l?u:d;var t=e.target.attributes[0].value,n=a.findIndex((function(e){return t-e.id==0})),r=document.querySelector(".title-film"),o=document.querySelector(".movie-poster"),c=document.querySelector(".vote"),s=document.querySelector(".votes"),m=document.querySelector(".popularity"),v=document.querySelector(".title"),y=document.querySelector(".genres"),f=document.querySelector(".description-text");i=a[n],r.innerHTML=i.title,o.src=i.poster_path,c.innerHTML=i.vote_average,s.innerHTML=" / "+i.vote_count,m.innerHTML=i.popularity,v.innerHTML=i.original_title,y.innerHTML=i.genres,f.innerHTML=i.overview,i.watched?q.innerHTML="Remove from watched":q.innerHTML="Add to watched";i.queued?T.innerHTML="Remove from queue":T.innerHTML="Add to queue";L.style.display="block"}))}();
//# sourceMappingURL=my_library.9d33ca12.js.map
